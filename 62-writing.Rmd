# R Markdown

## Literate programming
Sweave, Knitr and R markdown all based on Donald Knuth's [Literate programming](https://en.wikipedia.org/wiki/Literate_programming). Text and code are in a common file and the code follows the structure of the text.


### Sweave

* Takes text in latex formate and R/S code chunks to generate (weave) one tex file.
* Included in R standard library (utils package)

### Knitr

* Takes several imputs for text (Latex, Markdown, HTML, AsciiDoc, reStructuredText, and Textile) and code (R, Python, ...)
* R package
* See: [Knitr Homepage](https://yihui.name/knitr)

### R Markdown

Combination of Knitr and Pandoc

* Knitr: executes the computer code embedded in Markdown, and converts R Markdown to Markdown
* Pandoc: renders Markdown to the output format you want (such as PDF, HTML, Word, and so on)

```{r echo = FALSE, out.width='70%', fig.align = 'center'}
knitr::include_graphics("figures/workflow_knitr.png")
```



* See: [Markdown Manual](https://bookdown.org/yihui/rmarkdown/)
* Compile/Render an  R Markdown document by
    - using function `rmarkdown::render()`
    - pushing knit button (Ctrl + Shift + k)


## Components

* Three basic components of an R Markdown document
    - Metadata (YAML frontmatter)
    - Text (Markdown)
    - Code (R, Python, C++, ...)


### YAML frontmatter
The information of the YAML frontmatter is passed to the output function when the document is rendered. To see **all possible options** go to the help page of the output function (e.g. `?rmarkdown::html_document` or `?bookdown::gitbook`). Some options are passed to kniter and some are passed to pandoc.

All output functions:

`r knitr::combine_words(grep('^[^_]+_(document|presentation)$', ls(asNamespace('rmarkdown')), value = TRUE), sep = '\n', and = '', before = '- \x60', after = '\x60')`

And some of extension packages (you need to include the package name) e.g. `tufte::tufte_html`


The YAML frontmatter follows the a certain syntax

- starts and ends with three dashes `---`
- tag and value sparated by `:`
- `true`, `false` (unlike `TRUE`, `FALSE` in R)
- vectors: with square brackets e.g. `output: ["html_document", "word_document"]`
- lists: indet code by two spaces

### Text
The syntax for text (also known as prose or narratives) is Markdown. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents.

Find all formatting syntax in detail in the [Pandoc Manual](https://pandoc.org/MANUAL.html#pandocs-markdown) e.g. 

* [Inline formatting](https://pandoc.org/MANUAL.html#inline-formatting)
* [Links](https://pandoc.org/MANUAL.html#links-1)
* [Lists](https://pandoc.org/MANUAL.html#lists)
* [Tables](https://pandoc.org/MANUAL.html#tables)

or in less detail in the [R Markdown manual](https://bookdown.org/yihui/rmarkdown/markdown-syntax.html)

* \\ : escape
* \` : code
* \* : italic/bold
* \_ : italic/bold
* \^ : superscript
* \~ : subscript
* \$ : formula
* \@ : reference
* \# : header
* \-/\+ : itemize
* \> : blockquote


```{r echo = FALSE, out.width='70%', fig.align = 'center'}
knitr::include_graphics("figures/writing_markdown.png")
```


My favourit html_document themes: flatly, spacelab, lumen and sandstone


### Code

#### Types
Two types of code

- A code chunk\index{code chunk} starts with three backticks like ```` ```{r} ```` where `r` indicates the language name, and ends with three backticks. You can write chunk options in the curly braces (e.g., set the figure height to 5 inches: ```` ```{r, fig.height=5} ````).
- An inline R code expression starts with `` `r `` and ends with a backtick `` ` ``.

#### Chunck Ouput

* Text
* Tables
* Graphics

#### Chunck options

All chunk options can be found in the [Knitr Manual](https://yihui.name/knitr/options/)

Most important chunck options:

- first element gives the engine (name of the language)
- second element can be a chunck name e.g. `{r, my-name, eval = ...}`
- `eval`: Whether to evaluate a code chunk.
- `echo`: Whether to echo the source code in the output document.
- `results`: When set to `'hide'`, text output will be hidden; when set to `'asis'`, text output is written "as-is", e.g., you can write out raw Markdown text from R code (like `cat('**Markdown** is cool.\n')`).
- `collapse`: Whether to merge text output and source code into a single code block in the output.
- `warning`, `message`, and `error`: Whether to show warnings, messages, and errors in the output document.
- `include`: Whether to include anything from a code chunk in the output document.
- `cache`: Whether to enable caching.
- `fig.width` and `fig.height` (or `fig.dim`): The (graphical device) size of R plots in **inches**.
- `out.width` and `out.height`: The output size of R plots in the output document in **percentage** (e.g. `out.width = '80%'`).
- `fig.align`: The alignment of plots. It can be `'left'`, `'center'`, or `'right'`.
- `dev`: The graphical device to record R plots. Typically it is `'pdf'` for LaTeX output, and `'png'` for HTML output, but you can certainly use other devices, such as `'svg'` or `'jpeg'`.
- `fig.cap`: The figure caption.
- `child`: You can include a child document in the main document. This option takes a path to an external file.


Set chunk option globally:



````markdown
`r ''````{r, setup, include=FALSE}
knitr::opts_chunk$set(comment = "#>",
                      tidy = TRUE,
                      fig.align = "center",
                      out.width = "80%")
```
````

<!-- 
## this seems necessary for correct source code displaying...
``` --> 


## Figures

Plot from code chunks or insert via `knitr::include_graphics()`

e.g.

````markdown
`r ''````{r, out.width='25%', fig.align='center', fig.cap='...'}
knitr::include_graphics('figures/hex-rmarkdown.png')
```
````
<!-- 
## this seems necessary for correct source code displaying...
``` --> 

```{r include-graphics, echo=FALSE, fig.cap='The R Markdown hex logo.', out.width='25%', fig.align='center'}
knitr::include_graphics('figures/hex-rmarkdown.png')
```

Chunk options

* `fig.cap = "text"` Figure captation text or text reference
* `fig.show='hold'` Show figures next to each other (if out.width < 50%)
    - Does currently not work with `fig.align = "center"`

Recomended file formate

* If output pdf use pdf images ([svg not possible](https://stackoverflow.com/questions/50165404/how-to-make-a-pdf-using-bookdown-including-svg-images)!)
* If output html use png images
* If output both use png
    - `options(knitr.graphics.auto_pdf = TRUE)` pdf output will automatically take file with same name but pdf format if it is available.


##### Wrap text arround plot {-}

Plots can be placed on right side with text wraped arround it. Use the following chunk options:

````markdown
`r ''````{r, out.width='25%', echo = FALSE, out.extra='style="float:right; padding:5px"'}
knitr::include_graphics('figures/hex-rmarkdown.png')
```
````
<!-- 
## this seems necessary for correct source code displaying...
``` --> 



## Tables

* For data in R use `knitr::kable()` (See [Kable Manual](https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html))
* For text use [Pandoc tables](https://pandoc.org/MANUAL.html#tables)
    + Available
        - Simple tables
        - Multiline tables
        - Grid tables
        - Pipe tables
    + Recommended to use
        - pipe tables for simple tables (generate [here](https://www.tablesgenerator.com/markdown_tables))
        - Grid tables where you need bullet points within the table (generate [here](https://www.tablesgenerator.com/text_tables))


```{block2, type='rmdcaution'}
Without using a header, the formated table is reduced to an unformatted html table. Avoid this by including a white space into the header ()
```



### HTML tables

Tables can be formatted in CSS if we are only interested in HTML output. Add the following internal `<style>` element (in document between `<style>` and `</style>` tag) or use an external CSS file (`style.css`).

##### Definition tables {-}

```css
/* definition tables (RZ) */
.book .book-body .page-wrapper .page-inner section.normal .deftab td,
.book .book-body .page-wrapper .page-inner section.normal .deftab th,
.book .book-body .page-wrapper .page-inner section.normal .deftab tr
{
  padding:0;
  border-style: hidden;
  background-color: white;
}

.deftab th, .deftab td {
  vertical-align: top;
  text-align: left;
}
.deftab th {
  width: 20%;       /* header cells are 20% width (first column) */
}
.deftab td:nth-child(1) {
  width: 20%;       /* first td cell also 20% width (first column) */
}
```

Afterwards we can use HTML tags to create the table

```html
<table class = "deftab">
  <tr>
    <td>**Doe**</td>
    <td>John</td>
  </tr>
  <tr>
    <td>Doe</td>
    <td>John</td>
  </tr>
  <tr>
    <td>Doe</td>
    <td>John</td>
  </tr>
</table>
```

Results in 

<table class = "deftab">
  <tr>
    <td>**Doe**</td>
    <td>John</td>
  </tr>
  <tr>
    <td>Doe</td>
    <td>John</td>
  </tr>
  <tr>
    <td>Doe</td>
    <td>John</td>
  </tr>
</table>



## Sepecial characters

* Mathematical stuff with Latex
    - $\alpha$ $\Gamma$ $\ggg$ $\notin$ $\dagger$ $\mathbb{R}$ $\Rightarrow$ $\infty$ $n$
* What you can reach on the keyboard, use keyboard
    - §°+"ç%&/()=?¦¬|¢~[]èéàüöä<$£
* Some characters with special meaning in markdown needs to be escaped with \\
    - Everywhere \\ \` \* \_ \^ \~ \$ \@ \{ \}
    - Beginning of new line \# \- \+ \>
* Furter characters
    - Find symbol with google, copy-paste (e.g. €)
    - Find html code (e.g. \&euro; $\Rightarrow$ &euro;)
        + Find many [here](https://dev.w3.org/html5/html-author/charref)
* html code examples examples
    - \&nbsp; for non-breaking space (several after each other possible)
    - \&Tab; for a tab
    - \&#128512; for &#128512;
    - \&larr; for &larr; (does work in pdf)
    - \&rArr; for &rArr; (does not work in pdf)
    - Will not always work with pdf output (some characters work others not)!
* Text writing symbols
    - "\\  " backslash followed by space = nonbreaking space
    - backslash followed by newline = hard line break
    -"&#8239;" thin nonbreaking space
    -"&#8209;" nonbreaking hythen (should be used as hythen minus)



## Section folding

Section folding is only available for HTML documents. There are two good options

* Global code folding
* Local section folding


##### Global code folding {-}

Well explained [here](https://bookdown.org/yihui/rmarkdown/html-document.html#code-folding). Put the line `code_folding: hide` in the YAML header

```yaml
---
title: "My Document"
output:
  html_document:
    code_folding: hide
---
```

You can specify `code_folding: show` to still show all R code by default but then allow users to hide the code if they wish.


##### Local section folding {-}

Good ideas can be found [here](https://stackoverflow.com/questions/52576626/rmarkdown-collapsible-panel). Here we describe a methode with HTML/CSS buttons.

1. Add HTML code for button at beginning of your document. Alternatively you make a separate html file. Find button code and how to make separate HTML file in Chapter \@ref(NewBookdownProject)
2. Add this HTML code at the place were you want the button.

```html
<button onclick="myFunction('new_identifier')">Text on button</button>
<div id="new_identifier" style="display: none">

Blabla.

</div>
```

Replace `new_identifier` with unique identifier for that section. Replace `Text on button` and `Blabla`



## Add box

These type of boxes are only available for HTML documents.
There is a good implementation to add boxes for caution, important, note, tip and waring

1. Add CSS code for button at beginning of your document. Alternatively you make a separate CSS style file. Find button code and how to make separate CSS style file in Chapter \@ref(NewBookdownProject)
2. Add this code at the place were you want the button.



````markdown
`r ''````{block2, type='rmdcaution'}
Text
```
````

Replace `rmdcaution` with `rmdimportant`, `rmdnote`, `rmdtip` and `rmdwarning`. Note that the code chunk always needs to be taged as `block2`.

Here how they look like

```{block2, type='rmdcaution'}
Caution
```

```{block2, type='rmdimportant'}
Important
```

```{block2, type='rmdnote'}
Note
```

```{block2, type='rmdtip'}
Tip
```

```{block2, type='rmdwarning'}
Warning
```



## Template

This is a template containing structure, equations, references, cross-references, figures and tables with caption. The rendered output of the template can be found [here](https://retodomax.github.io/R_Ref_Book/template.html).
To get the the template in pdf, replace the `output` section in the YAML header with

```yaml
  bookdown::pdf_document2:
    toc: true
    toc_depth: 3
    number_sections: true
```


<button onclick="myFunction('markdown_template')">Show template</button>

<div id="markdown_template" style="display: none">
````markdown
---
project: CompSkills    #################################################
title:   Template
author:  "[Reto Zihlmann](https://retodomax.github.io/)"
date:    "`r Sys.Date()`"
output:
  bookdown::html_document2:
    toc: true
    toc_depth: 3
    toc_float: true
bibliography: [bib_zotero.bib, bib_packages.bib]
link-citations: true
---

`r ''````{r, setup, include=FALSE}
knitr::opts_chunk$set(comment = "",
                      tidy = TRUE,
                      fig.align = "left",
                      out.width = "100%",
                      echo = FALSE,
                      warning = FALSE,
                      message = FALSE,
                      error = FALSE)
```

`r ''````{r, package-bib, include=FALSE}
# automatically create a bib database for R packages
knitr::write_bib(c(
  .packages(), 'bookdown', 'knitr', 'rmarkdown', "mgcv"
), 'bib_packages.bib')
```


<!-- CSS Stype for Figure caption -->
<style>
p.caption {
  color: gray;
  font-size: 0.7em;
  padding-bottom: 30px;
}
</style>


# Abstract {-}

Here is some small abstract. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.


# Introduction {#intro}

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

1. What is the first research question?
2. How should we answer it?
3. What is the third research question?


# Method {#method}

## Idea {#idea}

Lorem ipsum dolor sit amet, consectetur adipiscing elit (see [here](https://www.google.ch/)), sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Some inline equation $h = f(x)$ in the middle of text. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

$$
a^2 + b^2 = c^2
(\#eq:pythagoras)
$$

As you can see in Equation \@ref(eq:pythagoras), lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.


`r ''````{r, someCalculations, echo = T}
x <- 5.012345678901234567890
y <- 1:20
```


In this text we use the variable $x$ and write it `r format(x, digits=4)` inline in text. Now a picture


(ref:resPr3) This is the figure caption. We can use it to explain the content of the figure. We can use it to explain the content of the figure. We can use it to explain the content of the figure. We can use it to explain the content of the figure.

## Calcultion {#calc}

`r ''````{r, figPoints, fig.cap="(ref:resPr3)"}
plot(1:10)
```



Now we continue with some text. As you can see in Figure \@ref(fig:figPoints) there are 10 points. The same was also decribed in Section \@ref(intro) or in Equation \@ref(eq:pythagoras) or in the package `rmarkdown` [see @R-bookdown]. The second way to make References [@R-mgcv]. For the third way see @R-knitr.


# Discussion {#disc}

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

`r ''````{r}
library(magrittr)
library(kableExtra)
dt <- mtcars[1:5, 1:6]
kable(dt,
      digits = 3,
      caption = "Estimated motor current and standard deviation for each impeller at the two operating points") %>%
  kable_styling("striped",
                full_width = F,
                position = "left") %>%
  add_header_above(c(" " = 1, "Group 1" = 2, "Group 2" = 2, "Group 3" = 2))
```





# References {#ref}
````

</div>


Good resources for additional tips/templates

* <https://holtzy.github.io/Pimp-my-rmd/> (Tips)
* <https://github.com/juba/rmdformats> (Templates package)



## Basic Elements

<table class = "comtab">
  <col width="20%">
  <col width="40%">
  <col width="40%">
  <tr>
    <th>Element</th>
    <th>Latex/Sweave</th>
    <th>Rmarkdown/Bookdown</th>
  </tr>
  <tr>
    <td>Plain text</td>
    <td>Plain text</td>
    <td>Plain text</td>
  </tr>
  <tr>
    <td>*Italics*</td>
    <td>`\textit{text}`</td>
    <td>`*text*`</td>
  </tr>
  <tr>
    <td>**Bold**</td>
    <td>`\textbf{text}`</td>
    <td>`**text**`</td>
  </tr>
  <tr>
    <td>`Code verbatium`</td>
    <td>`\texttt{code}`</td>
    <td>`` `code` ``</td>
  </tr>
  <tr>
    <td>Subscript~2~</td>
    <td>`text$_2$`</td>
    <td>`text~2~`</td>
  </tr>
  <tr>
    <td>Superscript^2^</td>
    <td>`text$^2$`</td>
    <td>`text^2^`</td>
  </tr>
  <tr>
    <td>~~Strikethrough~~</td>
    <td>
    ```markdown
\usepackage{ulem}
\sout{Strikethrough}
```
    </td>
    <td>`~~strikethrough~~`</td>
  </tr>
  <tr>
    <td>Reserved characters</td>
    <td>`#` `$` `%` `^` `&` `_` `{` `}` `~` `\`</td>
    <td>`\` `` ` `` `*` `_` `{` `}` `[` `]` `(` `)` `>` `#` `+` `-` `.` `!` and more (not always necessary to escape)</td>
  </tr>
  <tr>
    <td>Escaped with</td>
    <td>`\#` `\$` `\%` `\^{}` `\&` `\_` `\{` `\}` `\~{}` `\textbackslash{}`</td>
    <td>`\*` `\_` `\\`</td>
  </tr>
  <tr>
    <td>Nonbreaking space (10\ kg)</td>
    <td>`10~kg`</td>
    <td>`10\ kg`</td>
  </tr>
  <tr>
    <td>Line break</td>
    <td>`\\ENTER`</td>
    <td>`\ENTER`</td>
  </tr>
  <tr>
    <td>-- (endash)</td>
    <td>`--`</td>
    <td>`--`</td>
  </tr>
  <tr>
    <td>--- (emdash)</td>
    <td>`---`</td>
    <td>`---`</td>
  </tr>
  <tr>
    <td>Inline eqation $A = \pi*r^2$</td>
    <td>`$A = \pi*r^2$`</td>
    <td>`$A = \pi*r^2$`</td>
  </tr>
  <tr>
    <td>Equation block</td>
    <td>
    ```markdown
\usepackage{amsmath}
\begin{align*} 
    E=mc^2
\end{align*}
```
    </td>
    <td>`$$E=mc^2$$`</td>
  </tr>
  <tr>
    <td>Equation block with number
$$
a^2 + b^2 = c^2
(\#eq:pythagoras)
$$
    </td>
    <td>
    ```markdown
\usepackage{amsmath}
\begin{align} 
    a^2 + b^2 = c^2
\end{align}
```
    </td>
    <td>
    ```markdown
$$
a^2 + b^2 = c^2
(\#eq:pythagoras)
$$
```
  </td>
  </tr>
  <tr>
    <td>Header</td>
    <td>`\section{Header}`</td>
    <td>`# Header`</td>
  </tr>
  <tr>
    <td>Sub header</td>
    <td>`\subsection{Subheader}`</td>
    <td>` ## Subheader`</td>
  </tr>
  <tr>
    <td>Comments</td>
    <td>`% comment`</td>
    <td>`<!--comment-->`</td>
  </tr>
  <tr>
    <td>Multiline comment</td>
    <td>
    ```markdown
\usepackage{verbatim}
\begin{comment}
    comment
\end{comment}
```
    </td>
    <td>`<!--comment` <br>
    `several lines-->`</td>
  </tr>
  <tr>
    <td><http://www.google.ch></td>
    <td>`\url{https://www.google.ch}`</td>
    <td>`<http://www.google.ch>`</td>
  </tr>
  <tr>
    <td>[Link](http://www.google.ch)</td>
    <td>`\href{https://www.google.ch}{Link}`</td>
    <td>`[Link](http://www.google.ch)`</td>
  </tr>
  <tr>
    <td>
    * Unordered list
    * Second level
    </td>
    <td>
    ```markdown
\begin{itemize}
      \item Unordered list
      \begin{itemize}
	      \item Second level
      \end{itemize}
\end{itemize}
```
    </td>
    <td>
    `* Unordered list` <br>
    \ \ \ `- Second level`
    </td>
  </tr>
  <tr>
    <td>
    1. Ordered list
    </td>
    <td>
    ```markdown
\begin{enumerate}
    \item Ordered list
\end{enumerate}
```
    </td>
    <td>`1. Ordered list`</td>
  </tr>
  <tr>
    <td>>block quote</td>
    <td>
```markdown
\begin{quote}
  Text
\end{quote}
```
    </td>
    <td>`> Text`</td>
  </tr>
  <tr>
    <td>Horizontal line</td>
    <td>`\noindent\rule{\textwidth}{0.4pt}`</td>
    <td>`***`</td>
  </tr>
  <tr>
    <td>Small image ![](figures/R_logo2.png)</td>
    <td>
    ```markdown
\usepackage{graphicx}
\includegraphics{R_logo2}
```
    </td>
    <td>`![](R_logo2.png)`</td>
  </tr>
  <tr>
    <td>Formal image ![](figures/R_logo2.png)</td>
    <td>
    ```markdown
\usepackage{graphicx}
\begin{figure}
\centering
\includegraphics[width=0.25\textwidth]{R_logo2}
\caption{Figure caption}
\label{fig:mesh1}
\end{figure}
```
    </td>
    <td>
````markdown
`r ''````{r, out.width='25%', fig.align='center', fig.cap='...'}
knitr::include_graphics('figures/R_logo2.png')
```
````
<!-- 
## this seems necessary for correct source code displaying...
``` --> 
    </td>
  </tr>
  <tr>
    <td>Label section</td>
    <td>`\section{Introduction} \label{intro}`</td>
    <td>`# Introduction {#intro}`</td>
  </tr>
  <tr>
    <td>Label equation</td>
    <td>
    ```markdown
\begin{align}
    a^2 + b^2 = c^2
    \label{eq:1}
\end{align}
```
    </td>
    <td>
    ```markdown
$$
a^2 + b^2 = c^2
(\#eq:pythagoras)
$$
```
    </td>
  </tr>
  <tr>
    <td>Label figure</td>
    <td>
    ```markdown
\begin{figure}
...
\label{fig:meshy}
\end{figure}
```
    </td>
    <td>
````markdown
`r ''````{r, label, fig.cap='...'}
knitr::include_graphics('figures/hex-rmarkdown.png')
```
````
<!-- 
## this seems necessary for correct source code displaying...
``` --> 
    </td>
  </tr>
  <tr>
    <td>Label table</td>
    <td>
    ```markdown
\begin{longtable}[]{@{}lll@{}}
...
\label{tab:pros}
\end{longtable}
```
    </td>
    <td>
````markdown
`r ''````{r, label}
kableExtra::kable(...)
```
````
<!-- 
## this seems necessary for correct source code displaying...
``` --> 
    </td>
  </tr>
  <tr>
    <td>Cross ref section</td>
    <td>`See chapter~\ref{label}`</td>
    <td>`See chapter\ \@ref(label)`</td>
  </tr>
  <tr>
    <td>Cross ref equation</td>
    <td>`See equation~\eqref{eq:label}`</td>
    <td>`See equation\ \@ref(eq:label)`</td>
  </tr>
  <tr>
    <td>Cross ref figure</td>
    <td>`See figure~\ref{fig:label}`</td>
    <td>`See figure\ \@ref(fig:label)`</td>
  </tr>
  <tr>
    <td>Cross ref table</td>
    <td>`See table~\ref{tab:label}`</td>
    <td>`See table\ \@ref(tab:label)`</td>
  </tr>
  <tr>
    <td>Bibliography</td>
    <td>
    ```markdown
\usepackage{biblatex}
\addbibresource{sample.bib}
\begin{document}
...
\printbibliography
\end{document}
```
    </td>
    <td>
    ```markdown
---
title: Thesis
author: "Reto Zihlmann"
bibliography: [retoMT2018.bib]
...
---
```
    </td>
  </tr>
  <tr>
    <td>
    Add citation
    </td>
    <td>
(Autor Year) `\parencite{CitKey}` <br>
Autor (Year) `\textcite{CitKey}` <br>
Autor Year `\cite{CitKey}` <br>
with natbib `\citep{}` `\citet{}` `\cite{}`
    </td>
    <td>
    (Autor Year) `[@CitKey]` <br>
    Autor (Year) `@CitKey` <br>
    </td>
  </tr>
  <tr>
    <td>Reference text</td>
    <td>Laborious. See [here](https://tex.stackexchange.com/a/292890/202258)</td>
    <td>
    `(ref:label) text` <br>
    text `(ref:label)` text
    </td>
  </tr>
  <tr>
    <td>Tables</td>
    <td>
    ```markdown
\begin{longtable}[]{@{}lll@{}}
\caption{The caption}\\
\toprule
col1 & col2 & col3\\
\midrule
\endhead
1 & 2 & 3\\
1 & 2 & 3\\
\bottomrule
\label{tab:pros}
\end{longtable}
```
    </td>
    <td>Rmarkdown</td>
  </tr>
  <tr>
    <td>Element</td>
    <td>Latex</td>
    <td>Rmarkdown</td>
  </tr>
</table>

