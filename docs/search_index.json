[["literate-programming.html", "Chapter 23 Literate programming 23.1 Sweave 23.2 Knitr 23.3 R Markdown 23.4 Basic Elements of Latex and R Markdown 23.5 Templates", " Chapter 23 Literate programming Sweave, Knitr and R Markdown all based on Donald Knuth’s Literate programming. Text and code are in a common file and the code follows the structure of the text. 23.1 Sweave Takes text in latex format and R/S code chunks to generate (weave) one tex file. Included in R standard library (utils package) File extension .Rnw (R noweb) 23.2 Knitr Takes several imputs for text (Latex, Markdown, HTML, AsciiDoc, reStructuredText, and Textile) and code (R, Python, …) R package See: Knitr Homepage Knitr can knit two types of files .Rmd files (R Markdown) .Rnw files (R noweb) 23.3 R Markdown Combination of Knitr and Pandoc Knitr: executes the computer code embedded in Markdown, and converts R Markdown to Markdown Pandoc: renders Markdown to the output format you want (such as PDF, HTML, Word, and so on) See: Markdown Manual Compile/Render an R Markdown document by using function rmarkdown::render() pushing knit button (Ctrl + Shift + k) 23.4 Basic Elements of Latex and R Markdown Element Latex/Sweave Rmarkdown/Bookdown Language Reserved characters # $ % ^ &amp; _ { } ~ \\ \\ ` * _ { } [ ] ( ) &gt; # + - . ! and more (not always necessary to escape) Escaped with \\# \\$ \\% \\^{} \\&amp; \\_ \\{ \\} \\~{} \\textbackslash{} \\* \\_ \\\\ Comments % comment &lt;!--comment--&gt; Multiline comment \\usepackage{verbatim} \\begin{comment} comment \\end{comment} &lt;!--comment several lines--&gt; Text options Plain text Plain text Plain text Italics \\textit{text} *text* Bold \\textbf{text} **text** Colored text \\textcolor{red}{text} No general solution (see here) HTML &lt;span style=\"color: red;\"&gt;text&lt;/span&gt; PDF \\textcolor{}{} Subscript2 text$_2$ text~2~ Superscript2 text$^2$ text^2^ Strikethrough \\usepackage{ulem} \\sout{Strikethrough} ~~strikethrough~~ http://www.google.ch \\url{https://www.google.ch} &lt;http://www.google.ch&gt; Link \\href{https://www.google.ch}{Link} [Link](http://www.google.ch) Unordered list Second level \\begin{itemize} \\item Unordered list \\begin{itemize} \\item Second level \\end{itemize} \\end{itemize} * Unordered list    - Second level Ordered list \\begin{enumerate} \\item Ordered list \\end{enumerate} 1. Ordered list block quote \\begin{quote} Text \\end{quote} &gt; Text Special Characters Nonbreaking space (10 kg) 10~kg 10\\ kg Line break \\\\ENTER \\ENTER – (endash) -- -- — (emdash) --- --- Sections Header \\section{Header} # Header Sub header \\subsection{Subheader} ## Subheader Sub header without number \\subsection*{Subheader} ## Subheader {-} Horizontal line \\noindent\\rule{\\textwidth}{0.4pt} *** Figures Small image \\includegraphics{R_logo2} ![](R_logo2.png) Formal image Snipped “fig” \\begin{figure} \\centering \\includegraphics[width=0.5\\textwidth]{R_logo2} \\caption{FigureCaption} \\label{fig:mylabel} \\end{figure} Snipped “fig” ```{r, mylabel, echo=FALSE, fig.cap=&#39;FigCap&#39;, out.width=&#39;25%&#39;, fig.align=&#39;center&#39;, fig.pos=&quot;tb&quot;} knitr::include_graphics(&#39;R_logo2.png&#39;) ``` Attention: label is mylabel but cross-references need to use fig:mylabel Formal image generated with R code Snipped “figR” &lt;&lt;mylabel, echo=FALSE, fig.cap=&#39;FigCap&#39;, out.width=&#39;25%&#39;, fig.align=&#39;center&#39;, fig.pos=&quot;tb&quot;&gt;&gt;= plot(1:3) @ Attention: label is mylabel but cross-references need to use fig:mylabel Snipped “figR” ```{r, mylabel, echo=FALSE, fig.cap=&#39;FigCap&#39;, out.width=&#39;25%&#39;, fig.align=&#39;center&#39;, fig.pos=&quot;tb&quot;} plot(1:3) ``` Attention: label is mylabel but cross-references need to use fig:mylabel Tables Tables \\begin{longtable}[]{@{}lll@{}} \\caption{The caption}\\\\ \\toprule col1 &amp; col2 &amp; col3\\\\ \\midrule \\endhead 1 &amp; 2 &amp; 3\\\\ 1 &amp; 2 &amp; 3\\\\ \\bottomrule \\label{tab:pros} \\end{longtable} Rmarkdown Equations Inline eqation $A = \\pi*r^2$ $A = \\pi*r^2$ Equation block \\usepackage{amsmath} \\begin{align*} E=mc^2 \\end{align*} $$E=mc^2$$ Equation block with number \\usepackage{amsmath} \\begin{align} a^2 + b^2 = c^2 \\end{align} $$ a^2 + b^2 = c^2 (\\#eq:pythagoras) $$ Code Inline code \\texttt{code} \\lstinline{code} (listings.sty) \\code{code} (RetoArticle.sty) `code` Code block &lt;&lt;eval=FALSE&gt;&gt;= code @ ```{r, eval=FALSE} code ``` . Code block as float Snipped “codeblock” \\begin{codeblock}[tb] {\\internallinenumbers \\resetlinenumber[1] \\footnotesize &lt;&lt;eval=FALSE&gt;&gt;= Code @ } \\caption{CodeCaption} \\label{code:Label} \\end{codeblock} . Makes only sense for PDF. Use Latex code on left. References Label section \\section{Introduction} \\label{sec:intro} # Introduction {#sec:intro} Label figure \\begin{figure} ... \\label{fig:FigLabel} \\end{figure} ```{r, label, fig.cap=&#39;...&#39;} knitr::include_graphics(&#39;figures/hex-rmarkdown.png&#39;) ``` &lt;/td&gt; Label table \\begin{longtable}[]{@{}lll@{}} ... \\label{tab:pros} \\end{longtable} ```{r, label} kableExtra::kable(...) ``` &lt;/td&gt; Label equation \\begin{align} a^2 + b^2 = c^2 \\label{eq:1} \\end{align} $$ a^2 + b^2 = c^2 (\\#eq:pythagoras) $$ Label code block Cross ref section See Chapter~\\ref{sec:label} See Chapter\\ \\@ref(sec:label) Cross ref figure See Figure~\\ref{fig:label} See Figure\\ \\@ref(fig:label) Cross ref table See Table~\\ref{tab:label} See Table\\ \\@ref(tab:label) Cross ref equation See Equation~\\eqref{eq:label} See Equation\\ \\@ref(eq:label) Cross ref code block Bibliography \\usepackage{biblatex} \\addbibresource{bib.bib} \\begin{document} ... \\printbibliography \\end{document} --- title: Thesis author: &quot;Reto Zihlmann&quot; bibliography: [bib.bib] ... --- Add citation (Autor Year) \\parencite{CitKey} Autor (Year) \\textcite{CitKey} Autor Year \\cite{CitKey} with natbib \\citep{} \\citet{} \\cite{} (Autor Year) [@CitKey] Autor (Year) @CitKey Reference text Laborious. See here (ref:label) text text (ref:label) text Element Latex Rmarkdown 23.5 Templates Sweave Template \\documentclass[11pt, a4paper]{article} \\input{RetoArticle.sty} \\input{RetoMath.sty} \\usepackage[style = authoryear]{biblatex} \\addbibresource{bib.bib} \\title{Title} \\author{Reto Zihlmann} \\date{\\today} \\begin{document} \\maketitle \\tableofcontents \\newpage &lt;&lt;setup, include=FALSE&gt;&gt;= knitr::opts_chunk$set(comment = &quot;##&quot;, tidy = FALSE, fig.align = &quot;left&quot;, fig.width = 7, fig.height = 5, out.width = &quot;50%&quot;, echo = TRUE, warning = FALSE, message = FALSE, error = FALSE) @ \\section{First Section} \\newpage \\printbibliography \\end{document} RMarkdown html Template --- project: R_Ref_Book ################################################# title: Title author: &quot;[Reto Zihlmann](https://retodomax.github.io/)&quot; date: &quot;`r Sys.Date()`&quot; output: bookdown::html_document2: toc: true toc_float: true includes: before_body: /home/reto/texmf-local/tex/latex/commonstuff/RetoMathjax.tex bibliography: - &quot;`r system(&#39;kpsewhich bib.bib&#39;, intern=TRUE)`&quot; - bib_packages.bib link-citations: true --- ```{r, setup, include=FALSE} knitr::opts_chunk$set(comment = &quot;&quot;, tidy = TRUE, fig.align = &quot;left&quot;, out.width = &quot;100%&quot;, echo = FALSE, warning = FALSE, message = FALSE, error = FALSE) ``` ```{r, package-bib, include=FALSE} # automatically create a bib database for R packages knitr::write_bib(c( .packages(), &#39;bookdown&#39;, &#39;knitr&#39;, &#39;rmarkdown&#39;, &quot;mgcv&quot; ), &#39;bib_packages.bib&#39;) ``` &lt;!-- CSS Stype for Figure caption --&gt; &lt;!-- CSS Style for more space between headers --&gt; &lt;style&gt; caption { color: gray; font-size: 0.8em; } p.caption { color: gray; font-size: 0.8em; padding-bottom: 30px; } h1, .h1 { margin-top: 84px; } h2, .h2, h3, .h3 { margin-top: 42px; } &lt;/style&gt; # First Section # References {#ref} RMarkdown pdf Template --- project: R_Ref_Book ################################################# title: Title author: &quot;[Reto Zihlmann](https://retodomax.github.io/)&quot; date: &quot;`r Sys.Date()`&quot; output: bookdown::pdf_document2: includes: in_header: - /home/reto/texmf-local/tex/latex/commonstuff/RetoArticle.sty - /home/reto/texmf-local/tex/latex/commonstuff/RetoMath.sty bibliography: - &quot;`r system(&#39;kpsewhich bib.bib&#39;, intern=TRUE)`&quot; - bib_packages.bib link-citations: true classoption: a4paper geometry: margin=2.5cm --- ```{r, setup, include=FALSE} knitr::opts_chunk$set(comment = &quot;&quot;, tidy = TRUE, fig.align = &quot;left&quot;, out.width = &quot;100%&quot;, echo = FALSE, warning = FALSE, message = FALSE, error = FALSE) ``` ```{r, package-bib, include=FALSE} # automatically create a bib database for R packages knitr::write_bib(c( .packages(), &#39;bookdown&#39;, &#39;knitr&#39;, &#39;rmarkdown&#39;, &quot;mgcv&quot; ), &#39;bib_packages.bib&#39;) ``` # First Section # References {#ref} "]]
